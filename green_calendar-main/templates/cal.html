<!DOCTYPE html>
<html lang = "en">
    <head>
        <meta charset = "UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.7/index.global.min.css">
        <script src="https://kit.fontawesome.com/16fda319fc.js" crossorigin="anonymous"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.7/index.global.min.js"></script>
        <title>Calendar</title>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
              var calendarEl = document.getElementById('calendar');
              var calendar = new FullCalendar.Calendar(calendarEl, {
                eventClick: function(info) {
      var eventObj = info.event;
      var url = "/weather?title=" + encodeURIComponent(eventObj.title);
        window.location.href = url;
      }
    

      ,
                initialView: 'dayGridMonth',
                events : [
                {% for event in events %}    
                {
                    title : '{{event.title}}',
                    start : '{{event.start}}',
                    water : '{{event.water}}',
                    ill : '{{event.ill}}',
                    hum : '{{event.hum}}',
                    tem : '{{event.tem}}',
                 },
                 
                {% endfor %}
                ],
              });
              calendar.render();
            });
          </script>
    </head>
    <body>
      <nav class = "main-nav">
        <a href="/"><button type = "submit", value="Button">Home</button></a>
      </nav>
        <div class="container">
            <div id="calendar"></div>
        </div>
        {% if alltodo ==0 %}
    <div class="p-3 mb-2 bg-dark text-white">NO DATA</div>
    {% else %}
    <div class = "container my-5">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">No</th>
            <th scope="col">Plant Name</th>
            <th scope="col">Water</th>
            <th scope="col">Illuminace</th>
            <th scope="col">Humidity</th>
            <th scope="col">Temperture</th>
          </tr>
        </thead>
        <tbody>
          {%for event in events%}
          <tr>
            <th scope="row">{{loop.index}}</th>
            <td>{{event.title}}</td>
            <td>{{event.water}}</td>
            <td>{{event.ill}}</td>
            <td>{{event.hum}}</td>
            <td>{{event.tem}}</td>
          </tr>
          {%endfor%}
        </tbody>
      </table>
    </div>
    {% endif %}
    </body>
</html>